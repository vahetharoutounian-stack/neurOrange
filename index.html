<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<meta name="color-scheme" content="dark" />
<meta name="theme-color" content="#000000" />
<title>neurOrange — Home</title>

<style>
  :root{
    --bergamot:#FFA64D;  /* soft golden glow */
    --pure:#FFA500;
    --nick:#FF6600;      /* Nickelodeon */
    --after:#F9751F;     /* Afterimage */
    --gap-deg:3;
    --inner-thick:34px;  /* recomputed in JS */
    --outer-thick-mult:2.2;
    --emoji-font:18px;
    --glow:0 0 10px #000, 0 0 18px #000;
  }
  *{box-sizing:border-box}
  html,body{
    margin:0; min-height:100%; background:#000; color:#fff;
    font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    -webkit-font-smoothing:antialiased; overflow:hidden;
  }

  /* stage */
  #phone{position:fixed; inset:0; display:grid; place-items:center}
  #canvas{position:relative; width:100%; height:100%; overflow:hidden; background:#000}

  #brandBar{position:absolute; left:0; right:0; top:10px; display:flex; justify-content:center; z-index:6; filter:drop-shadow(var(--glow))}
  #brand{font-weight:900; letter-spacing:.12em; font-size:clamp(18px,5vw,32px); color:#FFA500}

  /* background (video optional; fog always on) */
  #bgLayer{position:absolute; inset:0; z-index:1}
  #bgVideo{position:absolute; inset:0; width:100%; height:100%; object-fit:cover; opacity:0; transition:opacity .4s ease}
  .fogWrap{position:absolute; inset:-30%; z-index:0; pointer-events:none;
    -webkit-mask-image:radial-gradient(circle at 50% 50%, rgba(0,0,0,1) 62%, rgba(0,0,0,0) 100%);
            mask-image:radial-gradient(circle at 50% 50%, rgba(0,0,0,1) 62%, rgba(0,0,0,0) 100%);}
  .fog{position:absolute; inset:0; mix-blend-mode:screen; filter:blur(60px) saturate(120%);
       background:
         radial-gradient(28% 22% at 20% 30%, var(--nick) 0 55%, transparent 60%),
         radial-gradient(28% 24% at 80% 40%, var(--nick) 0 55%, transparent 60%),
         radial-gradient(30% 22% at 40% 70%, var(--nick) 0 55%, transparent 60%);
       animation:fog1 26s linear infinite alternate; opacity:.62}
  @keyframes fog1{0%{transform:translate(0,0) scale(1)}100%{transform:translate(-3%,-4%) scale(1.08)}}

  #focus{position:absolute; inset:0; display:grid; place-items:center; z-index:2}

  .wrapCenter{position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); will-change:transform,opacity}
  .spin{position:absolute; inset:0}
  .halo{position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); border-radius:50%;
        background:radial-gradient(closest-side, rgba(0,0,0,.35), rgba(0,0,0,0)); filter:blur(10px);
        pointer-events:none; z-index:-1}

  /* center prompt */
  #question{
    position:absolute; left:50%; top:50%; transform:translate(-50%,-50%) scale(1);
    display:grid; place-items:center; background:#000; color:#fff; border-radius:50%; border:none;
    z-index:5; filter:drop-shadow(var(--glow)); padding:.4rem .6rem; user-select:none;
    animation:breathe 7s ease-in-out infinite;
  }
  @keyframes breathe{0%,100%{transform:translate(-50%,-50%) scale(1.00)}50%{transform:translate(-50%,-50%) scale(1.02)}}
  #questionText{
    font-weight:900; font-style:italic; text-align:center;
    font-size:clamp(16px,3.6vw,22px); line-height:1.15; margin:0;
    display:inline-block; transform-origin:50% 50%;
    animation:colorPulse 5.5s ease-in-out infinite;
  }
  @keyframes colorPulse{
    0%{color:#fff;text-shadow:0 0 6px rgba(255,255,255,.35)}
    33%{color:var(--bergamot);text-shadow:0 0 8px rgba(255,166,77,.45)}
    66%{color:#FFA500;text-shadow:0 0 8px rgba(255,165,0,.45)}
    100%{color:#fff;text-shadow:0 0 6px rgba(255,255,255,.35)}
  }

  /* rings rotate continuously */
  #innerSVG,#outerSVG{transform-box:fill-box; transform-origin:50% 50%; animation:spinCW 60s linear infinite}
  #outerSVG{animation-duration:70s}
  @keyframes spinCW{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}

  /* painting ring */
  #midWrap{z-index:8}
  #midSpin{animation:spinCCW 56s linear infinite; filter:drop-shadow(var(--glow))}
  @keyframes spinCCW{from{transform:rotate(0deg)}to{transform:rotate(-360deg)}}
  #midRing{position:absolute; inset:0}
  .mnode{position:absolute; top:50%; left:50%; border-radius:50%; transform:translate(-50%,-50%);
         background:#111; overflow:hidden; border:1.5px solid #000; filter:drop-shadow(var(--glow));
         cursor:pointer}
  .mnode.withCloud::before{content:""; position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
    width:calc(100% + 16px); height:calc(100% + 16px); border-radius:inherit;
    background:radial-gradient(closest-side, rgba(0,0,0,.38), rgba(0,0,0,0)); filter:blur(8px); pointer-events:none}
  .mnode img{width:100%; height:100%; object-fit:cover; display:block; border-radius:50%;
             animation:upright 56s linear infinite; transform-origin:center; backface-visibility:hidden}
  @keyframes upright{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}

  /* bottom nav — simple + tight */
  .bottomNav{
    position:fixed; left:0; right:0; bottom:calc(env(safe-area-inset-bottom) + 10px);
    z-index:8; display:flex; gap:10px; justify-content:space-between; padding:0 12px;
  }
  .navBtn{
    flex:1; text-align:center; font-weight:900; padding:10px 8px; border-radius:12px;
    border:1px solid rgba(0,0,0,.45); color:#140a00; user-select:none; -webkit-user-select:none; cursor:pointer;
    box-shadow:0 6px 18px rgba(0,0,0,.35); text-decoration:none; display:inline-block;
    white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    font-size:clamp(12px, 3.2vw, 14px); line-height:1.05;
  }
  .navLeft {background:linear-gradient(180deg,#F4C430,#E69B20)}
  .navMid  {background:linear-gradient(180deg,#FF8E00,#FF6A13)}
  .navRight{background:linear-gradient(180deg,#FFA500,#FE5000)}

  /* === TRANSITION OVERLAY (fade to black + quote) === */
  #transition{
    position:fixed; inset:0; background:#000; z-index:10050;
    display:grid; place-items:center; opacity:0; pointer-events:none; transition:opacity 600ms ease;
  }
  #transition.show{opacity:1; pointer-events:auto}
  #quoteBox{max-width:min(92vw,720px); padding:2.2rem 1.6rem; text-align:center}
  #quoteText{
    font-weight:900; font-style:italic; letter-spacing:.02em;
    font-size:clamp(18px,5.2vw,30px); line-height:1.25; color:#ddd;
    text-shadow:0 0 10px rgba(0,0,0,.8);
  }
  .Oword{
    animation: orangeHue 2.8s ease-in-out infinite alternate, orangeGlow 2.8s ease-in-out infinite alternate;
  }
  @keyframes orangeHue{0%{color:var(--nick)}100%{color:var(--after)}}
  @keyframes orangeGlow{
    0%{ text-shadow:0 0 10px rgba(255,166,77,.55),0 0 18px rgba(255,102,0,.35) }
    100%{ text-shadow:0 0 12px rgba(255,166,77,.75),0 0 26px rgba(255,102,0,.55) }
  }
</style>
</head>
<body>

<div id="phone">
  <div id="canvas">
    <div id="brandBar"><div id="brand">neurOrange</div></div>

    <div id="bgLayer">
      <video id="bgVideo" muted playsinline webkit-playsinline preload="auto" loop>
        <!-- <source src="assets/placeholder.mp4" type="video/mp4" /> -->
      </video>
      <div class="fogWrap"><div class="fog"></div></div>
    </div>

    <div id="focus">
      <!-- outer ring -->
      <div id="outerWrap" class="wrapCenter">
        <svg id="outerSVG" width="0" height="0" viewBox="0 0 1000 1000" style="position:absolute; inset:0"></svg>
        <div class="halo" id="outerHalo"></div>
      </div>

      <!-- inner ring -->
      <div id="innerWrap" class="wrapCenter">
        <svg id="innerSVG" width="0" height="0" viewBox="0 0 1000 1000" style="position:absolute; inset:0"></svg>
        <div class="halo" id="innerHalo"></div>
      </div>

      <!-- painting ring -->
      <div id="midWrap" class="wrapCenter">
        <div id="midSpin" class="spin"><div id="midRing"></div></div>
      </div>

      <!-- center prompt -->
      <div id="question"><div id="questionText">What are you<br/>feeling?</div></div>
    </div>

    <!-- bottom nav -->
    <div class="bottomNav">
      <a class="navBtn navLeft"  href="https://vahetharoutounian-stack.github.io/neurOrangeV3/">Color Library</a>
      <a class="navBtn navMid"   href="https://vahetharoutounian-stack.github.io/neurOrangeV2/">Art Gallery</a>
      <a class="navBtn navRight" href="https://vahetharoutounian-stack.github.io/neurOrangeV3/#step=3">Illusion Lab</a>
    </div>
  </div>
</div>

<!-- transition overlay -->
<div id="transition"><div id="quoteBox"><div id="quoteText"></div></div></div>

<script>
/* external targets */
const URLS = {
  color:  "https://vahetharoutounian-stack.github.io/neurOrangeV3/",
  gallery:"https://vahetharoutounian-stack.github.io/neurOrangeV2/"
};

/* NEW: exact quotes you provided (nothing else) */
const QUOTES_RAW = [
  "“It’s funny how the colors of the real world only seem really real when you viddy them on the screen.” — A Clockwork Orange (1971)",
  "“Orange is the happiest color.” — Frank Sinatra",
  "“There is no blue without yellow and without orange.” — Vincent Van Gogh",
  "“The orange tree took time to create this masterpiece.” — Thich Nhat Hanh",
  "“If the real world is orange juice, then art is like orange juice concentrate.” — Martin Mull",
  "“In a world full of yellows and reds, dare to be orange.”"
];

/* decorate 'orange' with animated span */
function decorateOrangeWords(str){
  return str.replace(/orange/gi, m => `<span class="Oword">${m}</span>`);
}

/* robust random index (works across Safari bfcache) */
function randIndex(len){
  try {
    const a = new Uint32Array(1);
    crypto.getRandomValues(a);
    return a[0] % len;
  } catch {
    return Math.floor(Math.random()*len);
  }
}

/* build quote HTML */
function pickQuoteHTML(){
  return decorateOrangeWords(QUOTES_RAW[randIndex(QUOTES_RAW.length)]);
}

/* sizes */
function $(id){return document.getElementById(id)}
function $$(sel){return Array.from(document.querySelectorAll(sel))}

/* center bubble size and gentle spin (1 rpm bounded) */
(function startBoundedSpin(){
  const t=$('questionText'); let angle=0, dir=Math.random()<0.5?1:-1; const speed=360/60;
  let change=3+Math.random()*5, last=performance.now();
  const b=$('question'); const w=t.offsetWidth, h=t.offsetHeight, pad=Math.max(6,Math.round(Math.max(w,h)*0.20));
  const D=Math.ceil(Math.max(w,h)+pad*2); b.style.width=D+'px'; b.style.height=D+'px';
  function step(now){
    const dt=(now-last)/1000; last=now; angle+=dir*speed*dt;
    if(angle>45){angle=45;dir=-1} if(angle<-45){angle=-45;dir=1}
    change-=dt; if(change<=0){ if(Math.random()<0.35) dir*=-1; change=3+Math.random()*5; }
    t.style.transform=`rotate(${angle.toFixed(3)}deg)`;
    requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
})();

/* ring drawing helpers */
function hexNorm(h){return (h||'').replace(/^#/,'').toUpperCase()}
function wedgePath(cx,cy,r0,r1,a0Deg,a1Deg){
  const R=d=>d*Math.PI/180; const a0=R(a0Deg),a1=R(a1Deg);
  const P=(r,a)=>({x:cx+r*Math.cos(a),y:cy+r*Math.sin(a)}); const A=P(r1,a0),B=P(r1,a1),C=P(r0,a1),D=P(r0,a0);
  const large=(a1Deg-a0Deg)>180?1:0; return `M ${D.x} ${D.y} L ${A.x} ${A.y} A ${r1} ${r1} 0 ${large} 1 ${B.x} ${B.y} L ${C.x} ${C.y} A ${r0} ${r0} 0 ${large} 0 ${D.x} ${D.y} Z`;
}
function drawRing(svgEl,sizePx,r0px,r1px,colors,gapDeg, onClickHex){
  svgEl.setAttribute('viewBox','0 0 1000 1000'); svgEl.style.width=sizePx+'px'; svgEl.style.height=sizePx+'px';
  const k=1000/sizePx, r0=Math.max(2,r0px*k), r1=r1px*k, gap=Number(gapDeg)||0;
  const n=colors.length, slice=360/n; svgEl.innerHTML='';
  for(let i=0;i<n;i++){
    const hex=(typeof colors[i]==='string')? colors[i] : colors[i].hex;
    const a0=i*slice, a1=(i+1)*slice-gap;
    const p=document.createElementNS('http://www.w3.org/2000/svg','path');
    p.setAttribute('d',wedgePath(500,500,r0,r1,a0,a1));
    p.setAttribute('fill',hex);
    p.setAttribute('stroke','rgba(0,0,0,.18)'); p.setAttribute('stroke-width','1');
    if(onClickHex) p.addEventListener('click', ()=> onClickHex(hex), {passive:true});
    svgEl.appendChild(p);
  }
}

/* layout rings + painting nodes */
const BRIGHT=[{hex:"#FE5000"},{hex:"#FFA500"},{hex:"#FF8E00"},{hex:"#FF6600"},{hex:"#FF6A00"},{hex:"#FF9400"},{hex:"#F28500"},{hex:"#FF7F24"},{hex:"#ED9121"},{hex:"#FFBF00"},{hex:"#FF5E00"},{hex:"#FF6A13"}];
const GHOSTS=["#B36019","#F9751F","#F6B76F","#D2B379","#E3AC47","#F88E10","#C18514","#DE9513","#92752D","#F0CE85","#FCBA45","#D99621","#E8C569","#F0B85F","#D2B265"];

function layoutRings(){
  const innerSVG=$('innerSVG'), outerSVG=$('outerSVG'), innerWrap=$('innerWrap'), outerWrap=$('outerWrap'), midRing=$('midRing');
  const W=innerWidth, H=innerHeight, S=Math.min(W,H);
  document.documentElement.style.setProperty('--emoji-font',Math.round(W*0.036)+'px');

  const innerD=Math.round(S*0.58), innerThick=Math.max(16,Math.round(innerD*0.12));
  innerWrap.style.width=innerD+'px'; innerWrap.style.height=innerD+'px';
  const innerOuter=innerD/2, innerInner=Math.max(2, innerOuter-innerThick*2);
  drawRing(innerSVG, innerD, innerInner, innerOuter, BRIGHT, getComputedStyle(document.documentElement).getPropertyValue('--gap-deg')||3,
    (hex)=>transitionTo(`${URLS.color}#step=2&cat=standards&hex=${hexNorm(hex)}`));

  const nodeD=Math.round(innerThick*0.85*5.25*0.82), margin=2, midR=Math.max(0, (W/2)-(nodeD/2)-margin);
  const N=6, step=2*Math.PI/N;
  if(!midRing.children.length){
    for(let i=1;i<=6;i++){
      const n=document.createElement('div'); n.className='mnode withCloud'; n.addEventListener('click', ()=> transitionTo(`https://vahetharoutounian-stack.github.io/neurOrangeV2/#painting=${i}`), {passive:true});
      const img=new Image(); img.alt='Painting '+i; img.src=`assets/paintings/${i}.jpg`; n.appendChild(img); midRing.appendChild(n);
    }
  }
  Array.from(midRing.children).forEach((n,i)=>{const a=i*step, x=Math.cos(a)*midR, y=Math.sin(a)*midR;
    n.style.width=nodeD+'px'; n.style.height=nodeD+'px'; n.style.transform=`translate(calc(-50% + ${x}px), calc(-50% + ${y}px))`;});

  const outerInnerR=midR + nodeD/2 + margin;
  const outerThick  = innerThick * 2.2;
  const outerOuterR = Math.max(outerInnerR + outerThick, W/2 + 8);
  const outD = Math.round(outerOuterR*2);
  outerWrap.style.width=outD+'px'; outerWrap.style.height=outD+'px';
  drawRing(outerSVG, outD, outerInnerR, outerOuterR, GHOSTS, getComputedStyle(document.documentElement).getPropertyValue('--gap-deg')||3,
    (hex)=>transitionTo(`${URLS.color}#step=3&cat=ghosts&hex=${hexNorm(hex)}`));
}
layoutRings();
addEventListener('resize', layoutRings, {passive:true});

/* transition overlay logic — ALWAYS pick anew (handles Safari back/forward cache) */
let transitioning=false;
function transitionTo(url){
  if(transitioning) return;
  transitioning=true;
  const tr = $('transition');
  const qt = document.getElementById('quoteText');
  qt.innerHTML = pickQuoteHTML();
  tr.classList.add('show');
  setTimeout(()=>{ location.href = url; }, 2000);
}

/* ensure new random on Safari back/forward cache */
window.addEventListener('pageshow', (e)=>{
  // hide any residual overlay and ensure next click re-randomizes
  $('transition').classList.remove('show');
  transitioning=false;
  // re-seed by a no-op crypto call (optional, harmless)
  try { crypto.getRandomValues(new Uint32Array(1)); } catch {}
});

/* optional video reveal if you add a source */
(function(){
  const v=$('bgVideo');
  if(!v) return;
  const show=()=> v.style.opacity=1;
  v.addEventListener('loadeddata', show, {once:true});
  v.addEventListener('playing',    show, {once:true});
  // const p=v.play(); if(p&&p.catch) p.catch(()=>{});
})();
</script>
</body>
</html>
